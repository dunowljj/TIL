# Clean Code

# 5장 형식 맞추기

### 형식을 맞추는 목적

- 코드 형식은 중요하다! - 의사소통의 일환
- 원래 코드의 흔적을 더 찾기 어려울 정도로 코드가 바뀌어도 맨 처음 잡아놓은 구현 스타일과 가독성 수준은 유지보수 용이성과 확장성에 계속 영향

▷ 적절한 행 길이를 유지하라

- 일반적으로 작은 파일이 큰 파일보다 이해하기 쉽다.

▷ 신문 기사처럼 작성하라

- 위에서 아래로
- 세세한 사실은 숨기고 커다란 그림 -> 내려가면서 세세한 사실이 조금씩 드러남
- 이름은 간단하면서도 설명이 가능하게 짓는다.

▷ 개념은 빈 행으로 분리하라

- 일련의 행 묶음은 완결된 생각 하나를 표현한다. 생각 사이에는 빈행을 넣어야 마땅하다.
- 빈 행은 새로운 개념을 시작한다는 시각적 단서

▷ 세로 밀집도

- 연관성을 의미 (100p)

▷ 수직 거리

- 타당한 근거가 없다면 서로 밀접한 개념은 한 파일에 속해야 마땅하다. -> protected 변수를 피해야 하는 이유 중 하나
- 연관성이 깊은 두 개념이 멀리 떨어져 있으면 코드를 읽는 사람이 소스 파일과 클래스를 여기저기 뒤지게 된다.
- **변수 선언**. 사용하는 위치에 최대한 가까이 선언
- **인스턴스 변수**. 인스턴스 변수는 클래스 맨 처음에 선언. 변수 간에 세로로 거리를 두지 않는다. 잘 설곟나 클래스는 많은 클래스 메서드가 인스턴스 변수를 사용하기 때문
- C++ -> 가위 규칙 / 자바 -> 보통 맨 처음
    - 어느 쪽이든 이의 없음. 잘 알려진 위치에 있어야
    - 중간에 몰래 변수 선언한 경우
- **종속함수**. 한 함수가 다른 함수를 호출한다면, 두 함수는 세로로 가까이 배치. 가능하면 호출하는 함수를 호출되는 함수보다 먼저 배치한다. 첫 함수에서 가장먼저 호출되는 함수가 바로 아래 정의된다.
- **개념적 유사성**. 어떤 코드는 서로 끌어당긴다. 친화도가 높기 떄문. 높을수록 가까이 배치(106p)
    - ex) 다른 함수 호출해서 생기는 종속성, 변수와 그 변수를 사용하는 함수

▷ 세로 순서

- 호출되는 함수를 호출하는 함수보다 나중에 배치. 소스 코드 모듈이 고차원에서 저차원으로 자연스럽게 배치
- 가장 중요한 개념을 먼저 표현. 세세한 사항을 최대한 배제한다.

### 가로 형식 맞추기

- 짧은 행이 바람직하다.
- 행 길이가 100자나 120자에달해도 나쁘지 않으나 그 이상은 주의 부족

▷ 가로 공백과 밀집도

- 이전에 어셈블리어 프로그래머였던 시절, 특정 구조를 강조하고자 가로 정렬 사용
- 선언문과 할당문을 별도로 정렬하지 않는다.

▷ 들여쓰기

- 소스파일은 윤곽도와 계층이 비슷함. 계층에서 각 수준은 이름을 선언하는 범위이자 선언문과 실행문을 해석하는 범위
    - 범위 계층을 보이기 위해 코드를 들여씀
- 들여쓰기 무시하기. 때로는 간단한 if문, 짧은 while문, 짧은 함수에서 들여쓰기 규칙을 무시하고픈 유혹이 생긴다.

▷ 가짜 범위

- 때로는 빈 while문이나 for문을 접한다. 가능한 이 구조를 피하는 편이다.
- while문 끝 세미콜론 하나를 덧붙인 코드에 수없이 골탕먹음
    - 아래와 같이 들여쓰고 쓰길 바람

```
while (dis.read(buf, 0, readBufferSize) != -1)
;
```

### 팀 규칙

- 팀 규칙을 합의하고 따라야 함
- 따로국밥 x

### 밥 아저씨의 형식 규칙

- 115~116 다시 읽어보기
    - 같은 함수 오버로드해서 **객체에 담는 것**과** 생성 분리**한 것 신기했다.
    - 순서나 기능 단위 다시 보기