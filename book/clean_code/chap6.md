# Clean Code

# 6장 객체와 자료 구조

- 변수의 비공개 지정
    - 남들이 변수에 의존하지 않도록
    - 어째서 조회/설정 함수는 공개할까?

### 자료 추상화

- 118p 목록 6-1, 6-2 비교
    - 변수 사이에 함수라는 계층을 넣는다고 구현이 저절로 감춰지지는 않는다. 구현을 감추려면 추상화가 필요하다.
    - 조회/설정 함수로 변수를 다룬다고 클래스가 되지는 않음
    - 추상 인터페이스 제공, 사용자가 구현을 모른 채 자료의 핵심을 조작 가능해야함
- 119p 목록 6-3, 6-4
    - 추상화
    - *개발자는 객체가 포함하는 자료를 표현할 가장 좋은 방법을 심각하게 고민해야 한다.*

### 자료/객체 비대칭

- 객체는 추상화 뒤로 자료를 숨긴 채 자료를 다루는 함수만 공개
- 자료구조는 자료를 그대로 제공, 별다른 함수 제공하지 않음

- 절차적인 코드는 기존 자료 구조를 변경하지 않으면서 새 함수를 추가하기 쉽다. 반면, 객체 지향 코드는 기존 함수를 변경하지 않으면서 새 클래스를 추가하기 쉽다.
- 반대도 참 -> 절차적인 코드는 새로운 자료 구조를 추가하기 어렵다. 그러려면 모든 함수를 고쳐야 한다. 객체 지향 코드는 새로운 함수를 추가하기 어렵다. 그러려면 모든 클래스를 고쳐야 한다.

- 새로운 자료 타입 필요 -> 클래스와 객체 지향 기법
- 새로운 함수 -> 절차적인 코드와 자료 구조
- 때로는 단순한 자료 구조와 절차적인 코드가 가장 적합한 상황도 온다.

### 디미터 법칙  (-> 다시 읽어보기)

- 디미터 법칙 : 모듈은 자신이 조작하는 객체의 속사정을 몰라야 한다
    - 클래스 C의 메서드 f는 다음과 같은 객체의 메서드만 호출
        - 클래스C
        - f가 생성한 객체
        - f 인수로 넘어온 객체
        - C 인스턴스 변수에 저장된 객체
        - 허용된 메서드가 반환하는 객체의 메서드는 호출해선 안됨
            - final String outputDir = ctxt.getOptions().getScratchDir().getAbsolutePath();

▷ 기차 충돌

- 흔히 위와 같은 코드를 기차충돌이라고 부름. 피하는게 좋다.
- 나누는 편이 좋다.
    - 디미터 법칙을 위반하는가?
        - 자료구조인가 객체인가에 따라 다름
    - 애초에 조회함수 대신 공개변수를 사용했다면?
        - 빈 같은 프레임워크의 표준의 경우는?

▷ 잡종 구조

- 때때로 절반은 객체, 절반은 자료 구조, 피하는게 좋다.
    - 절차적 프로그래밍의 자료 구조 접근 방식 처럼 비공개 변수를 사용하고 싶은 유혹에 빠짐
    - 새로운 함수는 물론 새로운 자료구조도 추가하기 어려움

▷ 구조체 감추기 (125p)

- 객체가 **뭔가를 하라고 말해야지** 속을 드러내나고 말하면 안된다.
- 객체에게 임무 맡기기

### 자료 전달 객체

- DTO나 빈 구조
    - 빈은 비공개 변수를 조회/설정 함수로 조작
    - 사이비 캡슐화

▷ 활성 레코드

- 객체로 취급 시 잡종 구조 나옴
- 자료 구조로 취급
    - 비즈니스 규칙을 담으면서 내부 자료를 숨기는 객체는 따로 생성

### 결론

- 편견없이 객체와 절차적인 코드를 이해하고 사용해야한다.