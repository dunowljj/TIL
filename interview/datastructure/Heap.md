# Heap
- 무엇인가를 차곡차곡 쌓아올린 더미'라는 뜻을 지니고 있다.
- **완전이진트리**를 기본으로 한다.
- 우선순위를 가지는 노드가 항상 루트노드에 오게 하는 특징이 있다.
  - 최대 힙, 최소 힙으로 나뉜다.
    - **최대 힙** : 부모노드가 자식 노드보다 크거나 같은 완전이진트리. 루트노드가 가장 크다.
    - **최소 힙** : 부모노드가 자식 노드보다 작거나 같은 완전이진트리. 루트노드가 가장 작다.
- 최소값, 최댓값을 빠르게 찾아낼 수 있다.
- 부모-자식 간의 우선순위가 존재한다.
- 우선순위큐를 구현할 수 있다.

## 구현 및 동작

- 완전이진트리가 기본임을 기억하자.

### 구현

- 힙을 구현할때 기본적으로 배열을 사용한다.
- 구현을 쉽게 하기 위해 배열의 첫번째 인덱스인 0은 사용되지 않는다.
  - 루트의 인덱스는 1, 왼쪽은 2, 오른쪽은 3

부모 노드와 자식 노드의 인덱스 설정

      왼쪽 자식 index = (부모 index) \* 2
      오른쪽 자식 index = (부모 index) \* 2 + 1
      부모 index = (자식 index) / 2

예시로,

- 루트의 인덱스가 1이라고 하면, 루트의 오른쪽,왼쪽 자식은 인덱스 2,3에 저장된다.
- 또 그 두 노드의 자식은 인덱스 2의 자식 -> (4,5), 인덱스 3의 자식 -> (6,7)에 저장된다.

### 최대 힙 동작

**삽입**

- 가장 마지막 노드에 삽입하고, 계속해서 부모노드와 비교를 하며 부모 노드가 더 작다면 Swap한다.
- 배열의 경우 인덱스를 `/2`하면 부모노드를 계속 찾아갈 수 있다.

**삭제**

- 루트 노드를 제거하고, 가장 마지막 노드를 루트 노드 위치로 옮긴다.
- 자식 중 해당 노드보다 더 큰 노드가 있다면 교환을 반복하여 재조정한다. `*2` 혹은 `*2+1`로 자식의 인덱스를 찾을 수 있다.

### 최소 힙 동작

최소 힙의 경우 원리는 같으나,

- 삽입시에는 부모 노드가 더 크다면 Swap한다.
- 삭제 시에는 더 작은 자식 노드와 Swap한다.

> 삽입, 삭제 구현 - [gyoogle heap](https://gyoogle.dev/blog/computer-science/data-structure/Heap.html)  
> 최대 힙의 삽입 및 삭제 과정 - [조훈데이님 블로그](https://johoonday.tistory.com/129)

### 동작의 시간복잡도
- 최대/최소 힙에서 최대/최소값을 찾는데는 O(1)이다.
  - 항상 루트노드에 최대/최소값이 저장되어 있기 때문이다.
- 삽입 삭제는 O(logN)이 소요된다.
  - 결국 트리의 높이 만큼 소요되며, 완전이진트리 형태이기 때문이다.

## 활용

- 힙정렬, 다익스트라 알고리즘

## 의문

<details>
  <summary>
    배열을 이용해 힙을 구현할때, 
    연산을 통해 부모로 혹으로 자식으로 모두 이동 가능하니까,
    방향성이 존재하는거 아니야?
  </summary>
  <div markdown="1">
  (gpt 답변)

반대로, 자식 노드에서 부모 노드로 '올라가는' 것도 가능합니다.
자식 노드의 인덱스가 j라고 할 때, 부모 노드의 인덱스는 j/2 (정수 나눗셈)가 됩니다.

그러나 이런 연산들은 배열의 특성을 활용한 것이며,
'트리'나 '힙'이라는 자료 구조의 본질적인 특성은 아닙니다.
트리나 힙 자체는 노드들 사이의 '부모-자식 관계'와 '순서 속성'을 유지하는 것에 주안점을 둡니다.
이런 관점에서 보면, 힙의 '방향성'이라는 개념은 '부모 노드에서 자식 노드로의 관계'를 나타내는 것입니다.

결론적으로, '방향성'이란 말은 그래프 이론의 용어로,
힙을 이해하는 데에는 '부모-자식 관계'라는 용어가 더 적합할 수 있습니다.

  </div>
</details>

- 정리
  - 올라가고 내려갈 수 있는 것은 배열의 특성을 이용한 것일 뿐 힙의 본질적인 특성은 아니다.
  - 트리나 힙 자체는 노드들 사이의 '부모-자식 관계'와 '순서 속성'을 유지하는 것에 주안한다.
  - 방향성은 그래프 이론 용어로 '부모-자식 관계'라는 용어가 더 적합하다.
